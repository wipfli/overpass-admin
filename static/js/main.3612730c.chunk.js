(this["webpackJsonpoverpass-admin"]=this["webpackJsonpoverpass-admin"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(11),c=n.n(o),r=n(15),a=n(55),l=n.n(a),s=(n(98),n(165)),d=n(40),u=n(76),j=n.n(u),p=n(77),y=n.n(p),b=n(174),h=n(166),f=n(163),O=n(7),m=function(e){var t=e.viewportWidth,n=e.viewportHeight,o=e.centerLongitude,c=e.centerLatitude,a=e.shareMap,u=Object(i.useState)(8),p=Object(r.a)(u,2),m=p[0],v=p[1],x=Object(i.useState)(null),g=Object(r.a)(x,2),w=g[0],S=g[1],k=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e=new l.a.Map({container:k.current,style:"https://vectortiles.geo.admin.ch/styles/ch.swisstopo.leichte-basiskarte.vt/style.json",center:[o,c],zoom:m,attributionControl:!1}),t=new l.a.ScaleControl({maxWidth:80,unit:"metric"});e.addControl(t),e.dragRotate.disable(),e.touchZoomRotate.disableRotation(),e.on("move",(function(){v(e.getZoom())})),e.on("load",(function(){e.resize()})),S(e),a(e)}),[]),Object(i.useEffect)((function(){w&&w.resize()}),[t,n]),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{ref:k,style:{position:"absolute",left:0,top:0,bottom:0,right:0}}),Object(O.jsx)("div",{style:{position:"absolute",right:0,top:0,padding:10},children:Object(O.jsxs)(b.a,{display:"flex",flexDirection:"column",children:[Object(O.jsx)(f.a,{title:"Zoom In",placement:"left",children:Object(O.jsx)(s.a,{onClick:function(){w&&(w.setZoom(m+1),v(m+1))},children:Object(O.jsx)(j.a,{})})}),Object(O.jsx)(f.a,{title:"Zoom Out",placement:"left",children:Object(O.jsx)(s.a,{onClick:function(){w&&(w.setZoom(m-1),v(m-1))},children:Object(O.jsx)(y.a,{})})})]})}),Object(O.jsx)("div",{style:{position:"absolute",right:0,bottom:0},children:Object(O.jsx)(b.a,{display:"flex",justifyContent:"flex-end",mx:1,color:"text.secondary",children:Object(O.jsx)(d.a,{style:{fontSize:12},children:Object(O.jsx)(h.a,{color:"inherit",href:"https://www.geo.admin.ch/",children:"\xa9swisstopo "})})})})]})},v=n(58),x=n(56),g=n.n(x),w=n(169),S=n(167),k=n(168),L=n(170),C=n(171),E=n(57),H=n.n(E),W=n(176),z=n(172),M=n(175),Z=function(e){var t=e.map,n=e.viewportHeight,o=e.viewportWidth,c=Object(i.useState)("loading..."),a=Object(r.a)(c,2),l=a[0],d=a[1],u=Object(i.useState)(["loading..."]),j=Object(r.a)(u,2),p=j[0],y=j[1],h=Object(i.useState)(null),f=Object(r.a)(h,2),m=f[0],x=f[1],E=Object(i.useState)(null),Z=Object(r.a)(E,2),B=Z[0],D=Z[1];Object(i.useEffect)((function(){g.a.get("https://api3.geo.admin.ch/rest/services/api/MapServer").then((function(e){var t=e.data.layers.map((function(e){return e.layerBodId})).sort();y(t),d(t[0])})).catch((function(e){return console.log(e)}))}),[]);var I=function(){if(!t)return"";var e=t.getBounds().toArray(),n=Object(r.a)(e,2),i=Object(r.a)(n[0],2),o=i[0],c=i[1],a=Object(r.a)(n[1],2),s=a[0],d=a[1];return"https://api3.geo.admin.ch/rest/services/api/MapServer/identify?geometryType=esriGeometryEnvelope&geometry=".concat(o,",").concat(c,",").concat(s,",").concat(d,"&imageDisplay=500,600,96&mapExtent=").concat(o,",").concat(c,",").concat(s,",").concat(d,"&tolerance=1&layers=all:").concat(l,"&sr=4326&geometryFormat=geojson")};return Object(O.jsxs)("div",{style:{position:"absolute",left:0,top:0},children:[Object(O.jsxs)(b.a,{m:1,p:1,children:[Object(O.jsx)(S.a,{children:Object(O.jsx)(b.a,{m:1,p:1,children:Object(O.jsx)(M.a,{id:"autocomplete",value:l,options:p,getOptionLabel:function(e){return e},style:{minWidth:300},onChange:function(e,t){return d(t)},renderInput:function(e){return Object(O.jsx)(z.a,Object(v.a)(Object(v.a)({},e),{},{label:"Select layer",variant:"outlined"}))}})})}),Object(O.jsxs)(b.a,{my:1,display:"flex",flexDirection:"row",children:[Object(O.jsx)(b.a,{children:Object(O.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){x("loading..."),D(null),g.a.get(I()).then((function(e){e.data.results.length>0?x("Loaded ".concat(e.data.results.length," features.")):x("Found no features."),t.getSource("my-overlay")?t.getSource("my-overlay").setData({type:"FeatureCollection",features:e.data.results}):(t.addSource("my-overlay",{type:"geojson",data:{type:"FeatureCollection",features:e.data.results}}),t.addLayer({filter:["==","$type","Polygon"],id:"my-overlay-fill",source:"my-overlay",type:"fill",paint:{"fill-color":"#3498db","fill-opacity":.5}}),t.addLayer({id:"my-overlay-line",source:"my-overlay",type:"line",paint:{"line-color":"#2980b9","line-width":2,"line-opacity":.5}}),t.addLayer({filter:["==","$type","LineString"],id:"my-overlay-linestring",source:"my-overlay",type:"line",paint:{"line-color":"#2980b9","line-width":2,"line-opacity":.8}}),t.addLayer({filter:["==","$type","LineString"],id:"my-overlay-linestring-clickregion",source:"my-overlay",type:"line",paint:{"line-color":"#2980b9","line-width":20,"line-opacity":0}}),t.addLayer({filter:["==","$type","Point"],id:"my-overlay-point",source:"my-overlay",type:"circle",paint:{"circle-radius":8,"circle-color":"#2980b9","circle-opacity":.5}}),t.on("click","my-overlay-fill",(function(e){D(e.features[0].properties)})),t.on("click","my-overlay-line",(function(e){D(e.features[0].properties)})),t.on("click","my-overlay-linestring-clickregion",(function(e){D(e.features[0].properties)})),t.on("click","my-overlay-point",(function(e){D(e.features[0].properties)})))})).catch((function(e){x("Error loading features.")}))},children:"Show"})}),Object(O.jsx)(b.a,{mx:1,children:Object(O.jsx)(w.a,{variant:"contained",color:"primary",onClick:function(){window.open(I())},children:"GeoJSON"})})]}),B&&Object(O.jsx)(S.a,{children:Object(O.jsxs)(b.a,{m:1,p:1,children:[Object(O.jsx)(s.a,{onClick:function(){return D(null)},children:Object(O.jsx)(H.a,{})}),Object(O.jsx)(b.a,{style:{width:Math.min(.75*o,340),maxHeight:.5*n,overflow:"auto"},children:Object(O.jsx)(k.a,{children:Object.keys(B).map((function(e,t){return Object(O.jsx)(L.a,{children:Object(O.jsx)(C.a,{primary:B[e],secondary:e})},t)}))})})]})})]}),Object(O.jsx)(W.a,{open:Boolean(m),autoHideDuration:5e3,onClose:function(){return x(null)},message:m,anchorOrigin:{vertical:"top",horizontal:"center"},action:Object(O.jsx)(s.a,{color:"inherit",onClick:function(){return x(null)},children:Object(O.jsx)(H.a,{})})})]})},B=function(){var e=Object(i.useState)(window.innerHeight),t=Object(r.a)(e,2),n=t[0],o=t[1],c=Object(i.useState)(window.innerWidth),a=Object(r.a)(c,2),l=a[0],s=a[1],d=Object(i.useState)(null),u=Object(r.a)(d,2),j=u[0],p=u[1];return Object(i.useEffect)((function(){var e=function(){o(window.innerHeight),s(document.getElementById("root").clientWidth)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(O.jsxs)("div",{children:[Object(O.jsx)(m,{viewportWidth:l,viewportHeight:n,centerLongitude:8.55301,centerLatitude:47.35257,shareMap:p}),Object(O.jsx)(Z,{map:j,viewportHeight:n,viewportWidth:l})]})};c.a.render(Object(O.jsx)(B,{}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.3612730c.chunk.js.map