{"version":3,"sources":["Map.js","Select.js","App.js","index.js"],"names":["Map","viewportWidth","viewportHeight","centerLongitude","centerLatitude","shareMap","window","location","hash","split","hashLongitude","hashLatitude","hashZoom","useState","Number","zoom","setZoom","map","setMap","mapContainerRef","useRef","lng","lat","center","setCenter","useEffect","maplibregl","container","current","style","attributionControl","scale","ScaleControl","maxWidth","unit","addControl","dragRotate","disable","touchZoomRotate","disableRotation","on","getCenter","getZoom","resize","hashLayer","newHash","toFixed","history","replaceState","undefined","ref","position","left","top","bottom","right","padding","Box","display","flexDirection","Tooltip","title","placement","IconButton","onClick","justifyContent","mx","color","Typography","fontSize","Link","href","Select","layer","setLayer","layers","setLayers","snack","setSnack","properties","setProperties","axios","get","then","res","sortedLayers","data","layerBodId","sort","catch","err","console","log","includes","load","getQueryUrl","getBounds","toArray","longitude0","latitude0","longitude1","latitude1","results","length","getSource","setData","type","features","addSource","addLayer","e","m","p","Paper","Autocomplete","id","value","options","getOptionLabel","option","minWidth","onChange","renderInput","params","TextField","label","variant","my","Button","open","width","Math","min","maxHeight","overflow","List","Object","keys","key","index","ListItem","ListItemText","primary","secondary","Snackbar","Boolean","autoHideDuration","onClose","message","anchorOrigin","vertical","horizontal","action","App","innerHeight","setViewportHeight","innerWidth","setViewportWidth","handleResize","document","getElementById","clientWidth","addEventListener","removeEventListener","ReactDOM","render"],"mappings":"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","file":"static/js/main.57182af0.chunk.js","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\n\r\nimport maplibregl from 'maplibre-gl'\r\nimport 'maplibre-gl/dist/maplibre-gl.css'\r\n\r\nimport { IconButton, Typography } from '@material-ui/core'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport RemoveIcon from '@material-ui/icons/Remove'\r\nimport Box from '@material-ui/core/Box'\r\nimport Link from '@material-ui/core/Link'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nconst Map = ({\r\n    viewportWidth,\r\n    viewportHeight,\r\n    centerLongitude,\r\n    centerLatitude,\r\n    shareMap,\r\n}) => {\r\n\r\n    const [\r\n        ,\r\n        hashLayer,\r\n        hashLongitude,\r\n        hashLatitude,\r\n        hashZoom,\r\n    ] = window.location.hash.split('/')\r\n\r\n    const [zoom, setZoom] = useState(hashZoom ? Number(hashZoom) : 7)\r\n    const [map, setMap] = useState(null)\r\n    const mapContainerRef = useRef(null)\r\n    const [center, setCenter] = useState({\r\n        lng: hashLongitude ? Number(hashLongitude) : centerLongitude, \r\n        lat: hashLatitude ? Number(hashLatitude) : centerLatitude,\r\n    })\r\n\r\n    const zoomIn = () => {\r\n        if (map) {\r\n            map.setZoom(zoom + 1)\r\n            setZoom(zoom + 1)\r\n        }\r\n    }\r\n\r\n    const zoomOut = () => {\r\n        if (map) {\r\n            map.setZoom(zoom - 1)\r\n            setZoom(zoom - 1)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        const map = new maplibregl.Map({\r\n            container: mapContainerRef.current,\r\n            style: 'https://vectortiles.geo.admin.ch/styles/ch.swisstopo.leichte-basiskarte.vt/style.json',\r\n            center: center,\r\n            zoom: zoom,\r\n            attributionControl: false,\r\n        })\r\n\r\n        const scale = new maplibregl.ScaleControl({\r\n            maxWidth: 80,\r\n            unit: 'metric'\r\n        })\r\n        map.addControl(scale)\r\n\r\n        map.dragRotate.disable()\r\n        map.touchZoomRotate.disableRotation()\r\n\r\n        map.on('move', () => {\r\n            setCenter(map.getCenter())\r\n            setZoom(map.getZoom())\r\n        })\r\n\r\n        map.on('load', () => {\r\n            map.resize()\r\n        })\r\n\r\n        setMap(map)\r\n        shareMap(map)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (map) {\r\n            map.resize()\r\n        }\r\n    }, [viewportWidth, viewportHeight])\r\n\r\n    useEffect(() => {\r\n        const [\r\n            ,\r\n            hashLayer\r\n        ] = window.location.hash.split('/')\r\n        const newHash = `#/${hashLayer}/${center.lng.toFixed(6)}/${center.lat.toFixed(6)}/${zoom.toFixed(1)}/`\r\n        window.history.replaceState(undefined, undefined, newHash)\r\n    \r\n    }, [center, zoom])\r\n\r\n    return (\r\n        <div>\r\n            <div\r\n                ref={mapContainerRef}\r\n                style={{\r\n                    position: 'absolute',\r\n                    left: 0,\r\n                    top: 0,\r\n                    bottom: 0,\r\n                    right: 0,\r\n                }}\r\n            />\r\n\r\n            <div style={{\r\n                position: 'absolute',\r\n                right: 0,\r\n                top: 0,\r\n                padding: 10\r\n            }}>\r\n                <Box display=\"flex\" flexDirection=\"column\">\r\n                    <Tooltip title=\"Zoom In\" placement=\"left\">\r\n                        <IconButton onClick={zoomIn}>\r\n                            <AddIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                    <Tooltip title=\"Zoom Out\" placement=\"left\">\r\n                        <IconButton onClick={zoomOut}>\r\n                            <RemoveIcon />\r\n                        </IconButton>\r\n                    </Tooltip>\r\n                </Box>\r\n            </div>\r\n\r\n            <div style={{\r\n                position: 'absolute',\r\n                right: 0,\r\n                bottom: 0\r\n            }}>\r\n                <Box display=\"flex\" justifyContent=\"flex-end\" mx={1} color=\"text.secondary\">\r\n                    <Typography style={{ fontSize: 12 }}>\r\n                        <Link color=\"inherit\" href=\"https://www.geo.admin.ch/\">©swisstopo </Link>\r\n                    </Typography>\r\n                </Box>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Map","import React, { useState, useEffect } from 'react';\r\n\r\nimport axios from 'axios'\r\n\r\nimport Box from '@material-ui/core/Box'\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Snackbar from '@material-ui/core/Snackbar'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Autocomplete from '@material-ui/lab/Autocomplete'\r\n\r\nconst Select = ({ map, viewportHeight, viewportWidth }) => {\r\n    const [layer, setLayer] = useState('loading...')\r\n    const [layers, setLayers] = useState(['loading...'])\r\n    const [snack, setSnack] = useState(null)\r\n    const [properties, setProperties] = useState(null)\r\n\r\n    useEffect(() => {\r\n        axios.get('https://api3.geo.admin.ch/rest/services/api/MapServer')\r\n            .then(res => {\r\n                const sortedLayers = res.data.layers.map(layer => {\r\n                    return layer.layerBodId\r\n                }).sort()\r\n                setLayers(sortedLayers)\r\n                setLayer(sortedLayers[0])\r\n            })\r\n            .catch(err => console.log(err))\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const [, hashLayer] = window.location.hash.split('/')\r\n        if (map && layers.includes(hashLayer) && hashLayer != layer) {\r\n            setLayer(hashLayer)\r\n            load(hashLayer)\r\n        }\r\n    }, [map, layers])\r\n\r\n    const getQueryUrl = layer => {\r\n        if (!map) {\r\n            return ''\r\n        }\r\n        const [\r\n            [\r\n                longitude0,\r\n                latitude0\r\n            ],\r\n            [\r\n                longitude1,\r\n                latitude1\r\n            ]\r\n        ] = map.getBounds().toArray()\r\n        const url = `https://api3.geo.admin.ch/rest/services/api/MapServer/identify?geometryType=esriGeometryEnvelope&geometry=${longitude0},${latitude0},${longitude1},${latitude1}&imageDisplay=500,600,96&mapExtent=${longitude0},${latitude0},${longitude1},${latitude1}&tolerance=1&layers=all:${layer}&sr=4326&geometryFormat=geojson`\r\n        return url\r\n    }\r\n\r\n    const load = layer => {\r\n        console.log('layer', layer)\r\n        console.log('queryUrl()', getQueryUrl(layer))\r\n        setSnack('loading...')\r\n        setProperties(null)\r\n        axios.get(getQueryUrl(layer))\r\n            .then(res => {\r\n                if (res.data.results.length > 0) {\r\n                    setSnack(`Loaded ${res.data.results.length} features.`)\r\n                }\r\n                else {\r\n                    setSnack('Found no features.')\r\n                }\r\n\r\n                if (!map.getSource('my-overlay')) {\r\n                    map.addSource('my-overlay', {\r\n                        type: 'geojson',\r\n                        data: {\r\n                            type: 'FeatureCollection',\r\n                            features: res.data.results,\r\n                        },\r\n                    })\r\n                    map.addLayer({\r\n                        'filter': [\r\n                            '==',\r\n                            '$type',\r\n                            'Polygon'\r\n                        ],\r\n                        'id': 'my-overlay-fill',\r\n                        'source': 'my-overlay',\r\n                        'type': 'fill',\r\n                        'paint': {\r\n                            'fill-color': '#3498db',\r\n                            'fill-opacity': 0.5\r\n                        }\r\n                    })\r\n                    map.addLayer({\r\n                        'id': 'my-overlay-line',\r\n                        'source': 'my-overlay',\r\n                        'type': 'line',\r\n                        'paint': {\r\n                            'line-color': '#2980b9',\r\n                            'line-width': 2,\r\n                            'line-opacity': 0.5\r\n                        }\r\n                    })\r\n                    map.addLayer({\r\n                        'filter': [\r\n                            '==',\r\n                            '$type',\r\n                            'LineString'\r\n                        ],\r\n                        'id': 'my-overlay-linestring',\r\n                        'source': 'my-overlay',\r\n                        'type': 'line',\r\n                        'paint': {\r\n                            'line-color': '#2980b9',\r\n                            'line-width': 2,\r\n                            'line-opacity': 0.8\r\n                        }\r\n                    })\r\n                    map.addLayer({\r\n                        'filter': [\r\n                            '==',\r\n                            '$type',\r\n                            'LineString'\r\n                        ],\r\n                        'id': 'my-overlay-linestring-clickregion',\r\n                        'source': 'my-overlay',\r\n                        'type': 'line',\r\n                        'paint': {\r\n                            'line-color': '#2980b9',\r\n                            'line-width': 20,\r\n                            'line-opacity': 0.0\r\n                        }\r\n                    })\r\n                    map.addLayer({\r\n                        'filter': [\r\n                            '==',\r\n                            '$type',\r\n                            'Point'\r\n                        ],\r\n                        'id': 'my-overlay-point',\r\n                        'source': 'my-overlay',\r\n                        'type': 'circle',\r\n                        'paint': {\r\n                            'circle-radius': 8,\r\n                            'circle-color': '#2980b9',\r\n                            'circle-opacity': 0.5,\r\n                        }\r\n                    })\r\n                    map.on('click', 'my-overlay-fill', e => {\r\n                        setProperties(e.features[0].properties)\r\n                    })\r\n                    map.on('click', 'my-overlay-line', e => {\r\n                        setProperties(e.features[0].properties)\r\n                    })\r\n                    map.on('click', 'my-overlay-linestring-clickregion', e => {\r\n                        setProperties(e.features[0].properties)\r\n                    })\r\n                    map.on('click', 'my-overlay-point', e => {\r\n                        setProperties(e.features[0].properties)\r\n                    })\r\n                }\r\n                else {\r\n                    map.getSource('my-overlay').setData({\r\n                        type: 'FeatureCollection',\r\n                        features: res.data.results,\r\n                    })\r\n                }\r\n            })\r\n            .catch(err => {\r\n                setSnack('Error loading features.')\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (layer != 'loading...') {\r\n            const [\r\n                ,\r\n                ,\r\n                hashLongitude,\r\n                hashLatitude,\r\n                hashZoom,\r\n            ] = window.location.hash.split('/')\r\n            const newHash = `#/${layer}/${hashLongitude}/${hashLatitude}/${hashZoom}/`\r\n            window.history.replaceState(undefined, undefined, newHash)\r\n        }\r\n    }, [layer])\r\n\r\n    return (\r\n        <div style={{\r\n            position: 'absolute',\r\n            left: 0,\r\n            top: 0\r\n        }}>\r\n            <Box m={1} p={1}>\r\n\r\n                <Paper>\r\n                    <Box m={1} p={1}>\r\n                        <Autocomplete \r\n                            id=\"autocomplete\"\r\n                            value={layer}\r\n                            options={layers}\r\n                            getOptionLabel={option => option}\r\n                            style={{minWidth: 300}}\r\n                            onChange={(e, value) => setLayer(value)}\r\n                            renderInput={params => <TextField {...params} label=\"Select layer\" variant=\"outlined\" />}\r\n                        />\r\n                    </Box>\r\n                </Paper>\r\n                <Box my={1} display=\"flex\" flexDirection=\"row\">\r\n                    <Box>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={() => load(layer)}>\r\n                            Show\r\n                        </Button>\r\n                    </Box>\r\n                    <Box mx={1}>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={() => {\r\n                            window.open(getQueryUrl(layer))\r\n                        }}>\r\n                            GeoJSON\r\n                        </Button>\r\n                    </Box>\r\n                </Box>\r\n                {properties && <Paper>\r\n                    <Box m={1} p={1}>\r\n                        <IconButton onClick={() => setProperties(null)}>\r\n                            <CloseIcon />\r\n                        </IconButton>\r\n                        <Box style={{\r\n                            width: Math.min(viewportWidth * 0.75, 340),\r\n                            maxHeight: (viewportHeight * 0.5),\r\n                            overflow: 'auto',\r\n                        }}>\r\n                            <List>\r\n                                {Object.keys(properties).map((key, index) => {\r\n                                    return (\r\n                                        <ListItem key={index}>\r\n                                            <ListItemText\r\n                                                primary={properties[key]}\r\n                                                secondary={key}\r\n                                            />\r\n                                        </ListItem>\r\n                                    )\r\n                                })}\r\n                            </List>\r\n                        </Box>\r\n                    </Box>\r\n                </Paper>}\r\n            </Box>\r\n            <Snackbar\r\n                open={Boolean(snack)}\r\n                autoHideDuration={5000}\r\n                onClose={() => setSnack(null)}\r\n                message={snack}\r\n                anchorOrigin={{\r\n                    vertical: 'top',\r\n                    horizontal: 'center',\r\n                }}\r\n                action={\r\n                    <IconButton color=\"inherit\" onClick={() => setSnack(null)}>\r\n                        <CloseIcon />\r\n                    </IconButton>\r\n                }\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Select","import React, { useState, useEffect } from 'react'\r\n\r\nimport Map from './Map'\r\nimport Select from './Select'\r\n\r\nconst App = () => {\r\n\r\n    const [viewportHeight, setViewportHeight] = useState(window.innerHeight)\r\n    const [viewportWidth, setViewportWidth] = useState(window.innerWidth)\r\n    const [map, setMap] = useState(null)\r\n\r\n    useEffect(() => {\r\n        const handleResize = () => {\r\n            setViewportHeight(window.innerHeight)\r\n            setViewportWidth(document.getElementById('root').clientWidth)\r\n        }\r\n        window.addEventListener('resize', handleResize)\r\n        handleResize()\r\n        return () => window.removeEventListener('resize', handleResize)\r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <Map\r\n                viewportWidth={viewportWidth}\r\n                viewportHeight={viewportHeight}\r\n                centerLongitude={8}\r\n                centerLatitude={47}\r\n                shareMap={setMap}\r\n            />\r\n            <Select\r\n                map={map}\r\n                viewportHeight={viewportHeight}\r\n                viewportWidth={viewportWidth}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport App from './App'\r\n\r\nReactDOM.render((\r\n  <App />\r\n), document.getElementById('root'))\r\n"],"sourceRoot":""}