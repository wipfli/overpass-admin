(this["webpackJsonpoverpass-admin"]=this["webpackJsonpoverpass-admin"]||[]).push([[0],{122:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(10),c=n.n(o),a=n(15),r=n(55),l=n.n(r),s=(n(95),n(160)),d=n(43),j=n(76),u=n.n(j),b=n(77),h=n.n(b),O=n(170),f=n(161),p=n(173),y=n(5),x=function(e){var t=e.viewportWidth,n=e.viewportHeight,o=e.centerLongitude,c=e.centerLatitude,r=e.shareMap,j=Object(i.useState)(8),b=Object(a.a)(j,2),x=b[0],m=b[1],v=Object(i.useState)(null),g=Object(a.a)(v,2),w=g[0],S=g[1],k=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e=new l.a.Map({container:k.current,style:"https://vectortiles.geo.admin.ch/styles/ch.swisstopo.leichte-basiskarte.vt/style.json",center:[o,c],zoom:x,attributionControl:!1}),t=new l.a.ScaleControl({maxWidth:80,unit:"metric"});e.addControl(t),e.dragRotate.disable(),e.touchZoomRotate.disableRotation(),e.on("move",(function(){m(e.getZoom())})),e.on("load",(function(){e.resize()})),S(e),r(e)}),[]),Object(i.useEffect)((function(){w&&w.resize()}),[t,n]),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{ref:k,style:{position:"absolute",width:t-1,height:n-1,overflow:"hidden"}}),Object(y.jsx)("div",{style:{position:"absolute",right:0,top:0,padding:10},children:Object(y.jsxs)(O.a,{display:"flex",flexDirection:"column",children:[Object(y.jsx)(p.a,{title:"Zoom In",placement:"left",children:Object(y.jsx)(s.a,{onClick:function(){w&&(w.setZoom(x+1),m(x+1))},children:Object(y.jsx)(u.a,{})})}),Object(y.jsx)(p.a,{title:"Zoom Out",placement:"left",children:Object(y.jsx)(s.a,{onClick:function(){w&&(w.setZoom(x-1),m(x-1))},children:Object(y.jsx)(h.a,{})})})]})}),Object(y.jsx)("div",{style:{position:"absolute",right:0,bottom:0},children:Object(y.jsx)(O.a,{display:"flex",justifyContent:"flex-end",mx:1,color:"text.secondary",children:Object(y.jsx)(d.a,{style:{fontSize:12},children:Object(y.jsx)(f.a,{color:"inherit",href:"https://www.geo.admin.ch/",children:"\xa9swisstopo "})})})})]})},m=n(56),v=n.n(m),g=n(78),w=n.n(g),S=n(163),k=n(174),C=n(165),L=n(169),E=n(166),H=n(162),z=n(164),W=n(125),Z=n(167),B=n(57),D=n.n(B),M=n(172),R=function(e){var t=e.map,n=e.viewportHeight,o=e.viewportWidth,c=Object(i.useState)("loading..."),r=Object(a.a)(c,2),l=r[0],d=r[1],j=Object(i.useState)(["loading..."]),u=Object(a.a)(j,2),b=u[0],h=u[1],f=Object(i.useState)(null),p=Object(a.a)(f,2),x=p[0],m=p[1],g=Object(i.useState)(null),B=Object(a.a)(g,2),R=B[0],I=B[1];Object(i.useEffect)((function(){v.a.get("".concat("","/layers")).then((function(e){var t=e.data.sort();h(t),d(t[0])})).catch((function(e){return console.log(e)}))}),[]);var J=function(){if(!t)return"";var e=t.getBounds().toArray(),n=Object(a.a)(e,2),i=Object(a.a)(n[0],2),o=i[0],c=i[1],r=Object(a.a)(n[1],2),s=r[0],d=r[1];return w()("".concat("","/query"),{queryParams:{layer:l,longitude0:o,latitude0:c,longitude1:s,latitude1:d}})};return Object(y.jsxs)("div",{style:{position:"absolute",left:0,top:0},children:[Object(y.jsxs)(O.a,{m:1,p:1,children:[Object(y.jsx)(H.a,{children:Object(y.jsx)(O.a,{m:1,p:1,children:Object(y.jsxs)(S.a,{children:[Object(y.jsx)(k.a,{children:"Layer"}),Object(y.jsx)(L.a,{value:l,onChange:function(e){d(e.target.value)},children:b.map((function(e,t){return Object(y.jsx)(C.a,{value:e,children:e},t.toString())}))})]})})}),Object(y.jsxs)(O.a,{my:1,display:"flex",flexDirection:"row",children:[Object(y.jsx)(O.a,{children:Object(y.jsx)(E.a,{variant:"contained",color:"primary",onClick:function(){m("loading..."),I(null),v.a.get(J()).then((function(e){e.data.features.length>0?m("Loaded ".concat(e.data.features.length," features.")):m("Found no features."),t.getSource("my-overlay")?t.getSource("my-overlay").setData(e.data):(t.addSource("my-overlay",{type:"geojson",data:e.data}),t.addLayer({filter:["==","$type","Polygon"],id:"my-overlay-fill",source:"my-overlay",type:"fill",paint:{"fill-color":"#3498db","fill-opacity":.5}}),t.addLayer({id:"my-overlay-line",source:"my-overlay",type:"line",paint:{"line-color":"#2980b9","line-width":2,"line-opacity":.5}}),t.addLayer({filter:["==","$type","Point"],id:"my-overlay-point",source:"my-overlay",type:"circle",paint:{"circle-radius":8,"circle-color":"#2980b9","circle-opacity":.5}}),t.on("click","my-overlay-fill",(function(e){I(e.features[0].properties)})),t.on("click","my-overlay-line",(function(e){I(e.features[0].properties)})),t.on("click","my-overlay-point",(function(e){I(e.features[0].properties)})))})).catch((function(e){console.log(e)}))},children:"Show"})}),Object(y.jsx)(O.a,{mx:1,children:Object(y.jsx)(E.a,{variant:"contained",color:"primary",onClick:function(){window.open(J())},children:"GeoJSON"})})]}),R&&Object(y.jsx)(H.a,{children:Object(y.jsxs)(O.a,{m:1,p:1,children:[Object(y.jsx)(s.a,{onClick:function(){return I(null)},children:Object(y.jsx)(D.a,{})}),Object(y.jsx)(O.a,{style:{width:Math.min(.75*o,340),maxHeight:.5*n,overflow:"auto"},children:Object(y.jsx)(z.a,{children:Object.keys(R).map((function(e,t){return Object(y.jsx)(W.a,{children:Object(y.jsx)(Z.a,{primary:R[e],secondary:e})},t)}))})})]})})]}),Object(y.jsx)(M.a,{open:Boolean(x),autoHideDuration:5e3,onClose:function(){return m(null)},message:x,anchorOrigin:{vertical:"top",horizontal:"center"},action:Object(y.jsx)(s.a,{color:"inherit",onClick:function(){return m(null)},children:Object(y.jsx)(D.a,{})})})]})},I=function(){var e=Object(i.useState)(window.innerHeight),t=Object(a.a)(e,2),n=t[0],o=t[1],c=Object(i.useState)(window.innerWidth),r=Object(a.a)(c,2),l=r[0],s=r[1],d=Object(i.useState)(null),j=Object(a.a)(d,2),u=j[0],b=j[1];return Object(i.useEffect)((function(){var e=function(){o(window.innerHeight),s(document.getElementById("root").clientWidth)};return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),Object(y.jsxs)("div",{children:[Object(y.jsx)(x,{viewportWidth:l,viewportHeight:n,centerLongitude:8.55301,centerLatitude:47.35257,shareMap:b}),Object(y.jsx)(R,{map:u,viewportHeight:n,viewportWidth:l})]})};c.a.render(Object(y.jsx)(I,{}),document.getElementById("root"))}},[[122,1,2]]]);
//# sourceMappingURL=main.cc6a4524.chunk.js.map